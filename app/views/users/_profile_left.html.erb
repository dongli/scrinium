<ul class="left-side-list">
  <li><%= avatar @user, :medium %></li>
  <li><%= @user.name %></li>
  <li><%= render 'memberships/organization_logos', user: @user %></li>
  <li><%= @user.role.text %></li>
  <li>
    <%= fa_icon('clock-o', text: t('user.joined_at', date: @user.created_at.strftime("%Y-%-m"))) %>
  </li>
  <% if policy(@user).update? %>
    <li><%= link_to fa_icon('edit', text: t('action.edit')+t('global.info')), [ :edit, @user ] %></li>
    <li><%= link_to fa_icon('key', text: t('action.edit')+t('user.password')), change_user_password_path(@user) %></li>
    <% if @user == current_user %>
      <% if policy(Article).create? %>
        <li>
          <%=
            link_to fa_icon('file-o', text: t('action.add')+t('scrinium.article')),
            new_article_path, id: 'add-article'
          %>
        </li>
      <% end %>
      <% if policy(Resource).create? %>
        <li>
          <%=
            link_to fa_icon('cube', text: t('action.add')+t('scrinium.resource')),
            [ :new, @user, :resource ], id: 'add-resource', style: 'display: none;'
          %>
        </li>
      <% end %>
    <% end %>
  <% end %>
  <% if policy(Reference).create? %>
    <li>
      <%= link_to fa_icon('book', text: t('action.add')+t('scrinium.reference')), new_reference_path %>
    </li>
  <% end %>
  <li>
    <a href='#group-list'
      data-toggle='collapse'
      aria-expanded='false'
      aria-controls='group-list'>
      <%= fa_icon('users', text: t('user.join_groups', group_number: @user.groups.all.size)) %>
    </a>
  </li>
</ul>

<!-- Group list placeholder -->
<div class='collapse' id='group-list'>
  <ul class='left-side-list'>
    <% @user.groups.each do |group| %>
      <li class='indent'>
        <%= link_to fa_icon('chevron-right', text: group.name), group %>
      </li>
    <% end %>
    <% if policy(Group).create? %>
      <li class='indent'>
        <%= link_to fa_icon('plus-square', text: t('action.add')+t('scrinium.group')), new_group_path %>
      </li>
    <% end %>
  </ul>
</div>
