<div class='reference-form'>
  <%= simple_form_for @reference do |f| %>
    <%= f.hidden_field :creator_id, value: current_user.id %>
    <%=
      f.input :authors,
      label: t('reference.authors'),
      collection: @reference.authors,
      input_html: {
        multiple: 'multiple',
        data: {
          placeholder: t('reference.placeholder.authors')
        }
      }
    %>
    <%= f.input :title, label: t('reference.title') %>
    <div class='row'>
      <div class='col-md-4'>
        <%= f.input :reference_type, label: t('reference.type') %>
      </div>
      <div class='col-md-4'>
        <div id='select-journal'>
          <%= f.hidden_field :publicable_type, value: 'Journal' %>
          <% if @reference.publicable %>
            <%=
              f.input :publicable_id,
              label: t('reference.journal'),
              label_method: :abbreviation,
              value_method: :id,
              collection: [@reference.publicable],
              input_html: { id: 'input-journal-abbreviation' }
            %>
          <% else %>
            <%=
              f.input :publicable_id,
              label: t('reference.journal'), as: :select,
              input_html: { id: 'input-journal-abbreviation' }
            %>
          <% end %>
        </div>
      </div>
      <div class='col-md-4'>
        <%= f.input :doi, label: t('reference.doi') %>
      </div>
    </div>
    <div class='row'>
      <div class='col-md-3'>
        <%= f.input :year, label: t('reference.year') %>
      </div>
      <div class='col-md-3'>
        <%= f.input :volume, label: t('reference.volume') %>
      </div>
      <div class='col-md-3'>
        <%=
          f.input :issue, label: t('reference.issue'),
          disabled: ( @reference.publicable and not @reference.publicable.issued )
        %>
      </div>
      <div class='col-md-3'>
        <%= f.input :pages, label: t('reference.pages'), placeholder: t('reference.placeholder.pages') %>
      </div>
    </div>
    <%=
      f.input :abstract, label: t('reference.abstract'),
      as: :text, value: @reference.abstract
    %>
    <%= f.file_field :file, class: 'float-left' %>
    <%= f.button :submit, t('action.submit'), class: 'button float-right' %>
  <% end %>
</div>
