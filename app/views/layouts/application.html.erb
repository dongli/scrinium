<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title><%= content_for?(:title) ? yield(:title) + ' - ' + t('scrinium') : t('scrinium') %></title>
  <!-- Set ROOT_PATH for querying in JavaScript. -->

  <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>

  <script type="text/javascript" charset="utf-8">
    var ROOT_PATH = '<%= main_app.root_url %>';
    I18n = {}
    I18n.defaultLocale = '<%= I18n.default_locale %>';
    I18n.locale = '<%= I18n.locale %>';
  </script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      TeX: { equationNumbers: { autoNumber: "all" } }
    });
  </script>
  <%#= mathjax_tag %>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
</head>
<body>
  <!-- 由于Turbolink导致我们无法在<head>中yield如下content -->
  <%= yield :javascript %>

  <header>
    <%= render 'layouts/navbar' %>
  </header>

  <% if request.path == '/' %>
    <div class='with-background'>
  <% end %>
  <div id="main-container" class="container">
    <%= render 'layouts/message' %>
    <%= render_breadcrumbs if request.path != '/' and not request.path =~ /\/d\/users\// %>
    <div class='row'>
      <%= render 'layouts/left_side' %>
      <%= render 'layouts/main_block' %>
    </div>
  </div>
  <% if request.path == '/' %>
    </div>
  <% end %>

  <footer>
    <% if request.path == '/' %>
      Copyright &copy 2015 <%= t('global.shustone') %>
    <% end %>
  </footer>
</body>
</html>
