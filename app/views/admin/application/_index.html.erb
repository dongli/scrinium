<% if @q.present? %>
  <div class="row search-form-default">
    <div class="col-md-12">
      <%= search_form_for [:admin, @q], html: { class: 'form-inline form-horizontal' } do |f| %>
        <div class="input-group">
          <div class="input-cont">
            <%= f.text_field :"#{attributes.first}_cont", placeholder: "搜索#{resource_class.human_attribute_name(attributes.first)}...", class: 'form-control' %>
          </div>
          <span class="input-group-btn">
            <button class="btn green">
              查询
              <i class="m-icon-swapright m-icon-white"></i>
            </button>
          </span>
        </div>
      <% end %>
    </div>
  </div>
<% end %>
<div class="table-scrollable">
  <table class="table table-bordered table-striped table-hover" id="collection_table">
    <thead>
    <tr class="active">
      <% attributes.each do |attr| %>
        <th scope="col">
          <%= resource_class.human_attribute_name(attr) %>
        </th>
      <% end %>
      <th scope="col" style="min-width:150px !important">
        <%= "操作" %>
      </th>
    </tr>
    </thead>
    <tbody>
    <% collection.each do |resource| %>
      <tr>
        <% attributes.each do |attr| %>
          <% if respond_to?("#{attr}_text".to_sym) %>
            <td>
              <%= self.send("#{attr}_text".to_sym) %>
            </td>
          <% elsif resource.respond_to?("#{attr}_text".to_sym) %>
            <td>
              <%= resource.send("#{attr}_text".to_sym) %>
            </td>
          <% elsif resource.respond_to?("#{attr}_title".to_sym) %>
            <td>
              <%= resource.send("#{attr}_title".to_sym) %>
            </td>
          <% elsif resource.respond_to?("#{attr}_name".to_sym) %>
            <td>
              <%= resource.send("#{attr}_name".to_sym) %>
            </td>
          <% elsif resource.send(attr).is_a?(Time) %>
            <td>
              <%= resource.send(attr).try(:strftime, '%Y年%m月%d %H时%M分%S秒') %>
            </td>
          <% else %>
            <td>
              <%= resource.send(attr).to_s.truncate(20) %>
            </td>
          <% end %>
        <% end %>
        <td>


          <%= link_to t("action.show"), resource_path(resource), class: 'btn btn-xs blue' %>

          <!--<div class="btn-group">-->
            <!--<button class="btn blue btn-sm dropdown-toggle" type="button" data-toggle="dropdown">-->
              <!--管理 <i class="fa fa-angle-down"></i>-->
            <!--</button>-->
            <!--<ul class="dropdown-menu" role="menu">-->
              <!--<li>-->
                <!--<%= link_to t("action.edit"), edit_resource_path(resource), class: 'btn btn-xs yellow' %>-->

              <!--</li>-->
              <!--<li>-->
                <!--<%= link_to t("action.delete"), resource_path(resource), :method => :delete, data: {confirm: t("action.delete")}, class: 'btn btn-xs red' %>-->

              <!--</li>-->



            <!--</ul>-->
          <!--</div>-->

          <%= link_to t("action.edit"), edit_resource_path(resource), class: 'btn btn-xs yellow' %>
          <%= link_to t("action.delete"), resource_path(resource), :method => :delete, data: {confirm: t("action.delete")}, class: 'btn btn-xs red' %>
        </td>
      </tr>
    <% end %>
    </tbody>
    <tfoot>
    <tr class="active">
      <% attributes.each do |attr| %>
        <th>
          <%= resource_class.human_attribute_name(attr) %>
        </th>
      <% end %>
      <th>
        <%= "操作" %>
      </th>
    </tr>
    </tfoot>
  </table>
</div>
<%= paginate collection %>
<br/>
<div class="table-toolbar">
  <div class="btn-group">
    <%= link_to new_resource_path, class: 'btn green' do %>
      <%= t("action.add") %>
      <i class="fa fa-plus"></i>
    <% end %>
  </div>
</div>
