<% show_author = true if local_assigns[:show_author].nil? %>

<table class='articles'>
  <thead>
    <tr>
      <th width='200'><%= t('article.title') %></th>
      <% if show_author %>
        <th width='100'><%= t('article.author') %></th>
      <% end %>
      <th width='200'><%= t('global.create_time') %></th>
      <th width='100'><%= t('article.browse_count') %></th>
    </tr>
  </thead>
  <tbody>
    <% articles.each do |a| %>
    <% if not is_same_user?(a.user) and not is_in_groups?(a.groups) and
        a.privacy != t('privacy_types.public') %>
      <% next %>
    <% end %>
      <tr
        <% if a.draft %>
          class='article-draft'
        <% end %>
      >
        <td><%= link_to "《#{a.title}》", main_app.url_for([a.user, a]) %></td>
        <% if show_author %>
          <td><%= link_to a.user.name, main_app.user_path(a.user) %></td>
        <% end %>
        <td><%= a.created_at %></td>
        <td><%= a.impressionist_count filter: :session_hash %></td>
      </tr>
    <% end %>
  </tbody>
</table>
