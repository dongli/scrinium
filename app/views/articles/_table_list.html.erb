<% show_author = true if local_assigns[:show_author].nil? %>

<table class='articles'>
  <thead>
    <tr>
      <th width='200'><%= t('article.title') %></th>
      <% if show_author %>
        <th width='100'><%= t('article.author') %></th>
      <% end %>
      <th width='200'><%= t('global.create_time') %></th>
      <th width='100'><%= t('article.browse_count') %></th>
    </tr>
  </thead>
  <tbody>
    <% articles.each do |r| %>
    <% if not is_same_user?(r.user) and not is_in_groups?(r.groups) and
        r.privacy != t('privacy_types.public') %>
      <% next %>
    <% end %>
      <tr
        <% if r.draft %>
          class='article-draft'
        <% end %>
      >
        <td><%= link_to "《#{r.title}》", [r.user, r] %></td>
        <% if show_author %>
          <td><%= link_to r.user.name, user_path(r.user) %></td>
        <% end %>
        <td><%= r.created_at %></td>
        <td><%= r.impressionist_count filter: :session_hash %></td>
      </tr>
    <% end %>
  </tbody>
</table>
